{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/wxParse.js","webpack:///./src/utils/html2json.js","webpack:///./src/utils/wxDiscode.js","webpack:///./src/utils/htmlparser.js","webpack:///./src/utils/showdown.js","webpack:///./src/utils/util.js"],"names":["BIND_NAME","Component","properties","pageKey","type","String","value","rootKey","language","nodes","observer","val","converter","showdown","Converter","parseNodes","makeHtml","setTimeout","_parseNodes","data","pageNodeKey","wxparseRootKey","nodesData","bindData","lifetimes","detached","cacheInstance","removeAllByKey","methods","_parseHtml","Object","prototype","toString","call","setData","html","allPages","getCurrentPages","currentPage","length","__wxExparserNodeId__","transData","HtmlToJson","html2json","view","imagePadding","pageInstance","get","push","set","console","log","wxParseImgLoad","e","target","dataset","tagFrom","from","index","detail","width","height","recal","_wxAutoImageCal","imageWidth","imageHeight","wxParseImgTap","src","imageUrls","wx","previewImage","current","urls","originalWidth","originalHeight","autoWidth","autoHeight","results","windowWidth","windowHeight","wxParseTagATap","currentTarget","curPages","handleTagATap","isInnerPage","indexOf","navigateTo","url","__placeImgeUrlHttps","__emojisReg","__emojisBaseSrc","__emojis","wxDiscode","require","HTMLParser","empty","makeMap","block","inline","closeSelf","fillAttrs","special","str","obj","items","split","i","q","v","removeDOCTYPE","replace","trimHtml","removeInvalidTags","bindName","strDiscode","bufArray","node","images","start","tag","attrs","unary","content","parent","undefined","tagType","attr","reduce","pre","name","classStr","styleStr","match","Array","isArray","imgIndex","imgUrl","splice","urlToHttpUrl","fontSize","styleAttrs","style","key","source","unshift","end","shift","error","chars","text","textArray","transEmojiStr","comment","emojiObjs","emojiObj","array","eReg","RegExp","ele","baseSrc","emojisInit","reg","emojis","module","exports","strNumDiscode","strGreeceDiscode","strcharacterDiscode","strOtherDiscode","strMoreDiscode","rep","patt1","result","test","startTag","endTag","codeTag","codeContent","handler","stack","last","substring","parseEndTag","tagName","codeTagMatch","parseStartTag","trim","all","rest","toLowerCase","arguments","escaped","tagContent","pos","getDefaultOpts","simple","defaultOptions","omitExtraWLInCodeBlocks","defaultValue","describe","noHeaderId","prefixHeaderId","headerLevelStart","parseImgDimensions","simplifiedAutoLink","literalMidWordUnderscores","strikethrough","tables","tablesHeaderId","ghCodeBlocks","tasklists","smoothLivePreview","smartIndentationFix","description","JSON","parse","stringify","ret","opt","hasOwnProperty","parsers","extensions","globalOptions","flavor","github","vanilla","helper","setOption","getOption","getOptions","resetOptions","setFlavor","preset","option","getDefaultOptions","subParser","func","isString","Error","extension","ext","stdExtName","isUndefined","validExtension","validate","valid","getAllExtensions","removeExtension","resetExtensions","errMsg","baseMsg","listeners","filter","regex","ln","validateExtension","warn","a","isFunction","getType","forEach","callback","constructor","s","escapeCharactersCallback","wholeMatch","m1","charCodeToEscape","charCodeAt","escapeCharacters","charsToEscape","afterBackslash","regexString","rgxFindMatchPos","left","right","flags","f","g","x","l","t","m","exec","lastIndex","matchRecursiveRegExp","matchPos","slice","replaceRecursiveRegExp","replacement","repStr","finalStr","lng","bits","join","msg","alert","converterOptions","options","langExtensions","outputModifiers","_constructor","gOpt","_parseExtension","legacyExtensionLoading","validExt","listen","rTrimInputText","rsp","rgx","_dispatch","dispatch","evtName","globals","ei","nText","gHtmlBlocks","gHtmlMdBlocks","gHtmlSpans","gUrls","gTitles","gDimensions","gListLevel","hashLinkCounts","addExtension","useExtension","extensionName","ii","output","writeAnchorTag","m2","m3","m4","m5","m6","m7","linkText","linkId","title","search","simpleURLRegex","delimUrlRegex","simpleMailRegex","delimMailRegex","replaceLink","replaceMail","wm","link","lnkTxt","unescapedStr","bq","pattern","codeblock","nextChar","c","leadingText","numSpaces","addr","encode","ch","Math","floor","random","r","blockText","blockTags","repFunc","txt","config","matches","prefixHeader","isNaN","parseInt","setextRegexH1","setextRegexH2","spanGamut","hID","headerId","hLevel","hashBlock","matchFound","span","header","escapedId","inlineRegExp","referenceRegExp","writeImageTag","altText","gDims","processListItems","listStr","trimTrailing","isParagraphed","taskbtn","checked","item","bulletStyle","otp","parseConsecutiveLists","list","listType","counterRxg","subLists","parseCL","wholeList","grafs","grafsOut","grafsOutIt","codeFlag","delim","$1","num","$2","re","blankLines","tableRgx","parseStyles","sLine","parseHeaders","id","tableHeaderId","parseCells","cell","subText","buildTable","headers","cells","tb","tblLgn","rawTable","tableLines","rawHeaders","map","rawStyles","rawCells","styles","row","charCodeToReplace","fromCharCode","getSystemInfo","success","res","getUniqueKey","Date","getTime","bindInstance","instance","getInstance","clear","remove","childKey"],"mappings":"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","file":"wxParse.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","import HtmlToJson from './utils/html2json';\nimport showdown from './utils/showdown.js';\nimport { getSystemInfo, cacheInstance, getUniqueKey } from './utils/util';\n\nconst BIND_NAME = 'wxParse'\n\nComponent({\n  properties: {\n    // 当前页面的page标识符\n    pageKey: {\n      type: String,\n      value: ''\n    },\n    // 当前节点的根节点标识符\n    rootKey: {\n      type: String,\n      value: ''\n    },  \n    // 解析语言类型\n    language: {\n      type: String,\n      value: 'html' // 可选：html | markdown (md)\n    },\n    // 解析节点\n    nodes: {\n      type: null,\n      observer(val) {\n        if (!val) return\n\n        const { language } = this.properties\n        // 采用markdown解析\n        if (language === 'markdown' || language === 'md') {\n          const converter = new showdown.Converter();\n          const parseNodes = converter.makeHtml(val);\n          setTimeout(() => {\n            this._parseNodes(parseNodes)\n          }, 0);\n        } else { // 默认采用html解析\n          setTimeout(() => {\n            this._parseNodes(val)\n          }, 0)\n        }\n      }\n    },\n  },\n\n  data: {\n    pageNodeKey: '',\n    wxparseRootKey: '',\n    nodesData: [],\n    bindData: {},\n  },\n\n  lifetimes: {\n    detached() {\n      // 组件销毁，清除当前页面绑定的所有wxparse实例\n      cacheInstance.removeAllByKey(this.data.pageKey)\n    }\n  },\n\n  methods: {\n    _parseNodes(nodes) {\n      if (typeof nodes === 'string') { // 初始为html富文本字符串\n        this._parseHtml(nodes)\n      } else { // 判断是否解析出来节点数组，其余则为节点对象，需自构建成数组格式\n        const nodesData = Object.prototype.toString.call(nodes) === '[object Array]' ? nodes : [nodes]\n        this.setData({\n          nodesData,\n        })\n      }\n    },\n\n    _parseHtml(html) {\n      // 生成page，wxparse根节点标识符\n      const allPages = getCurrentPages(),\n            currentPage = allPages[allPages.length - 1],\n            pageNodeKey = `${BIND_NAME}_${currentPage.__wxExparserNodeId__}`,\n            wxparseRootKey = `${pageNodeKey}_${getUniqueKey()}`\n\n      //存放html节点转化后的json数据\n      const transData = HtmlToJson.html2json(html, wxparseRootKey)\n      transData.view = {}\n      transData.view.imagePadding = 0\n\n      this.setData({\n        wxparseRootKey,\n        pageNodeKey,\n        nodesData: transData.nodes,\n        bindData: {\n          [wxparseRootKey]: transData,\n        }\n      })\n      // 构建page页面对象内部的wxparse富文本节点数组集合 eg: pageId => [wxparse1key, wxparse2key, ....]\n      const pageInstance = cacheInstance.get(pageNodeKey)\n      if (pageInstance) {\n        pageInstance.push(wxparseRootKey)\n      } else {\n        cacheInstance.set(pageNodeKey, [wxparseRootKey])\n      }\n      cacheInstance.set(wxparseRootKey, transData)\n      console.log(this.data)\n    },\n\n    /**\n     * 图片视觉宽高计算函数区\n     * @param {*} e \n     */\n    wxParseImgLoad(e) {\n      // 获取当前的image node节点\n      const { from: tagFrom, index } = e.target.dataset || {}\n      if (typeof tagFrom !== 'undefined' && tagFrom.length > 0) {\n        const { width, height } = e.detail\n        \n        //因为无法获取view宽度 需要自定义padding进行计算，稍后处理\n        const recal = this._wxAutoImageCal(width, height)\n        this.setData({\n          width: recal.imageWidth,\n          height: recal.imageHeight,\n          [`nodesData[${index}].loaded`]: true,\n        })\n      }\n    },\n\n    /**\n     * 预览图片\n     * @param {*} e \n     */\n    wxParseImgTap(e) {\n      const { src = '' } = e.target.dataset || {}\n      const { imageUrls = [] } = cacheInstance.get(this.data.rootKey) || {}\n      wx.previewImage({ \n        current: src,\n        urls: imageUrls\n      })\n    },\n\n    /**\n     * 计算视觉优先的图片宽高\n     * @param {*} originalWidth \n     * @param {*} originalHeight \n     */\n    _wxAutoImageCal(originalWidth, originalHeight) {\n      let autoWidth = 0, autoHeight = 0;\n      const results = {}\n      const [ windowWidth, windowHeight ] = getSystemInfo()\n\n      // 判断按照哪种方式进行缩放\n      if (originalWidth > windowWidth) { //在图片width大于手机屏幕width时候\n        autoWidth = windowWidth\n        autoHeight = (autoWidth * originalHeight) / originalWidth\n        results.imageWidth = autoWidth\n        results.imageHeight = autoHeight\n      } else { // 否则展示原来数据\n        results.imageWidth = originalWidth\n        results.imageHeight = originalHeight\n      }\n      return results\n    },\n\n    /**\n     * 增加a标签跳转\n     * 1. 如果page页面有handleTagATap事件，优先采用事件回调的方式处理\n     * 2. 如果page页面没有handleTagATap事件，根据链接字段判断采用内外链跳转方式\n     * @param {*} e \n     */\n    wxParseTagATap(e) {\n      const { src = '' } = e.currentTarget.dataset\n\n      // 采用递归组件方式渲染，不能通过triggerEvent方式向父级传参，可以获取当前页面调用页面方法处理\n      const curPages =  getCurrentPages();\n      const currentPage = curPages[curPages.length - 1]\n      if (currentPage && currentPage.handleTagATap) {\n        currentPage.handleTagATap(src)\n        return\n      }\n\n      // 判断是否内部链接跳转\n      const isInnerPage = src.indexOf('http') === -1\n      if (isInnerPage) {\n        wx.navigateTo({\n          url: src\n        })\n      } else {\n        wx.navigateTo({\n          url: `/miniprogram_npm/wx-minicomponent/wxParse/webviewPage/webviewPage?src=${src}`\n        })\n      }\n    }\n  }\n})","/**\n * html2Json 改造来自: https://github.com/Jxck/html2json\n * \n * \n */\n\nvar __placeImgeUrlHttps = \"https\";\nvar __emojisReg = '';\nvar __emojisBaseSrc = '';\nvar __emojis = {};\nvar wxDiscode = require('./wxDiscode.js');\nvar HTMLParser = require('./htmlparser.js');\n// Empty Elements - HTML 5\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\n// Block Elements - HTML 5\nvar block = makeMap(\"br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\n\n// Inline Elements - HTML 5\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\n\n// Attributes that have their values filled in disabled=\"disabled\"\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\n\n// Special Elements (can contain anything)\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\n\nfunction makeMap(str) {\n    var obj = {}, items = str.split(\",\");\n    for (var i = 0; i < items.length; i++)\n        obj[items[i]] = true;\n    return obj;\n}\n\nfunction q(v) {\n    return '\"' + v + '\"';\n}\n\nfunction removeDOCTYPE(html) {\n    return html\n        .replace(/<\\?xml.*\\?>\\n/, '')\n        .replace(/<.*!doctype.*\\>\\n/, '')\n        .replace(/<.*!DOCTYPE.*\\>\\n/, '');\n}\n\nfunction trimHtml(html) {\n    return html\n        // .replace(/\\r?\\n+/g, '')\n        // .replace(/\\n+/g, '')\n        .replace(/<!--.*?-->/ig, '')\n        // .replace(/\\/\\*.*?\\*\\//ig, '')\n        .replace(/[ ]+</ig, '<')\n}\n\n/**\n * 过滤掉小程序无法展示的标签\n * @param {*} html \n */\nfunction removeInvalidTags(html) {\n    return html\n        .replace(/\\<head(.|\\n)*<\\/head\\>/ig, '')\n        .replace(/\\<title(.|\\n)*<\\/title\\>/ig, '')\n        .replace(/\\<script(.|\\n)*<\\/script\\>/ig, '')\n        .replace(/\\<meta(.|\\n)*<\\/meta\\>/ig, '')\n        .replace(/\\<style(.|\\n)*<\\/style\\>/gm, '')\n} \n\n\nfunction html2json(html, bindName) {\n    //处理字符串\n    html = removeDOCTYPE(html);\n    html = removeInvalidTags(html)\n    html = trimHtml(html);\n    html = wxDiscode.strDiscode(html);\n    //生成node节点\n    var bufArray = [];\n    var results = {\n        node: bindName,\n        nodes: [],\n        images:[],\n        imageUrls:[]\n    };\n    var index = 0;\n    HTMLParser(html, {\n        start: function (tag, attrs, unary, content) {\n            //debug(tag, attrs, unary);\n            // node for this element\n            var node = {\n                node: 'element',\n                tag: tag,\n            };\n            // 判断是否需要添加标签主体内容\n            content && (node['content'] = content)\n\n            if (bufArray.length === 0) {\n                node.index = index.toString()\n                index += 1\n            } else {\n                var parent = bufArray[0];\n                if (parent.nodes === undefined) {\n                    parent.nodes = [];\n                }\n                node.index = parent.index + '.' + parent.nodes.length\n            }\n\n            if (block[tag]) {\n                node.tagType = \"block\";\n            } else if (inline[tag]) {\n                node.tagType = \"inline\";\n            } else if (closeSelf[tag]) {\n                node.tagType = \"closeSelf\";\n            }\n\n            if (attrs.length !== 0) {\n                node.attr = attrs.reduce(function (pre, attr) {\n                    var name = attr.name;\n                    var value = attr.value;\n                    if (name == 'class') {\n                        // console.dir(value);\n                        //  value = value.join(\"\")\n                        node.classStr = value;\n                    }\n                    // has multi attibutes\n                    // make it array of attribute\n                    if (name == 'style') {\n                        // console.dir(value);\n                        //  value = value.join(\"\")\n                        node.styleStr = value;\n                    }\n                    if (value.match(/ /)) {\n                        value = value.split(' ');\n                    }\n                    \n\n                    // if attr already exists\n                    // merge it\n                    if (pre[name]) {\n                        if (Array.isArray(pre[name])) {\n                            // already array, push to last\n                            pre[name].push(value);\n                        } else {\n                            // single value, make it array\n                            pre[name] = [pre[name], value];\n                        }\n                    } else {\n                        // not exist, put it\n                        pre[name] = value;\n                    }\n\n                    return pre;\n                }, {});\n            }\n\n            //对img添加额外数据\n            if (node.tag === 'img') {\n                node.imgIndex = results.images.length;\n                var imgUrl = node.attr.src;\n                if (imgUrl[0] == '') {\n                    imgUrl.splice(0, 1);\n                }\n                imgUrl = wxDiscode.urlToHttpUrl(imgUrl, __placeImgeUrlHttps);\n                node.attr.src = imgUrl;\n                node.from = bindName;\n                results.images.push(node);\n                results.imageUrls.push(imgUrl);\n            }\n            \n            // 处理font标签样式属性\n            if (node.tag === 'font') {\n                var fontSize = ['x-small', 'small', 'medium', 'large', 'x-large', 'xx-large', '-webkit-xxx-large'];\n                var styleAttrs = {\n                    'color': 'color',\n                    'face': 'font-family',\n                    'size': 'font-size'\n                };\n                if (!node.attr.style) node.attr.style = [];\n                if (!node.styleStr) node.styleStr = '';\n                for (var key in styleAttrs) {\n                    if (node.attr[key]) {\n                        var value = key === 'size' ? fontSize[node.attr[key]-1] : node.attr[key];\n                        node.attr.style.push(styleAttrs[key]);\n                        node.attr.style.push(value);\n                        node.styleStr += styleAttrs[key] + ': ' + value + ';';\n                    }\n                }\n            }\n\n            //临时记录source资源\n            if(node.tag === 'source'){\n                results.source = node.attr.src;\n            }\n\n            if (unary) {\n                // if this tag doesn't have end tag\n                // like <img src=\"hoge.png\"/>\n                // add to parents\n                var parent = bufArray[0] || results;\n                if (parent.nodes === undefined) {\n                    parent.nodes = [];\n                }\n                parent.nodes.push(node);\n            } else {\n                bufArray.unshift(node);\n            }\n        },\n        end: function (tag) {\n            //debug(tag);\n            // merge into parent tag\n            var node = bufArray.shift();\n            if (node.tag !== tag) console.error('invalid state: mismatch end tag');\n\n            //当有缓存source资源时于于video补上src资源\n            if(node.tag === 'video' && results.source){\n                node.attr.src = results.source;\n                delete results.source;\n            }\n\n            if (bufArray.length === 0) {\n                results.nodes.push(node);\n            } else {\n                var parent = bufArray[0];\n                if (parent.nodes === undefined) {\n                    parent.nodes = [];\n                }\n                parent.nodes.push(node);\n            }\n        },\n        chars: function (text) {\n            //debug(text);\n            var node = {\n                node: 'text',\n                text: text,\n                textArray:transEmojiStr(text)\n            };\n            \n            if (bufArray.length === 0) {\n                node.index = index.toString()\n                index += 1\n                results.nodes.push(node);\n            } else {\n                var parent = bufArray[0];\n                if (parent.nodes === undefined) {\n                    parent.nodes = [];\n                }\n                node.index = parent.index + '.' + parent.nodes.length\n                parent.nodes.push(node);\n            }\n        },\n        comment: function (text) {\n            //debug(text);\n            // var node = {\n            //     node: 'comment',\n            //     text: text,\n            // };\n            // var parent = bufArray[0];\n            // if (parent.nodes === undefined) {\n            //     parent.nodes = [];\n            // }\n            // parent.nodes.push(node);\n        },\n    });\n    return results;\n};\n\nfunction transEmojiStr(str){\n  // var eReg = new RegExp(\"[\"+__reg+' '+\"]\");\n//   str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\n  \n  var emojiObjs = [];\n  //如果正则表达式为空\n  if(__emojisReg.length == 0 || !__emojis){\n      var emojiObj = {}\n      emojiObj.node = \"text\";\n      emojiObj.text = str;\n      array = [emojiObj];\n      return array;\n  }\n  //这个地方需要调整\n  str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\n  var eReg = new RegExp(\"[:]\");\n  var array = str.split(eReg);\n  for(var i = 0; i < array.length; i++){\n    var ele = array[i];\n    var emojiObj = {};\n    if(__emojis[ele]){\n      emojiObj.node = \"element\";\n      emojiObj.tag = \"emoji\";\n      emojiObj.text = __emojis[ele];\n      emojiObj.baseSrc= __emojisBaseSrc;\n    }else{\n      emojiObj.node = \"text\";\n      emojiObj.text = ele;\n    }\n    emojiObjs.push(emojiObj);\n  }\n  \n  return emojiObjs;\n}\n\nfunction emojisInit(reg='',baseSrc=\"/wxParse/emojis/\",emojis){\n    __emojisReg = reg;\n    __emojisBaseSrc=baseSrc;\n    __emojis=emojis;\n}\n\nmodule.exports = {\n    html2json: html2json,\n    emojisInit:emojisInit\n};\n\n","// HTML 支持的数学符号\nfunction strNumDiscode(str){\n  str = str.replace(/&forall;/g, '∀');\n  str = str.replace(/&part;/g, '∂');\n  str = str.replace(/&exists;/g, '∃');\n  str = str.replace(/&empty;/g, '∅');\n  str = str.replace(/&nabla;/g, '∇');\n  str = str.replace(/&isin;/g, '∈');\n  str = str.replace(/&notin;/g, '∉');\n  str = str.replace(/&ni;/g, '∋');\n  str = str.replace(/&prod;/g, '∏');\n  str = str.replace(/&sum;/g, '∑');\n  str = str.replace(/&minus;/g, '−');\n  str = str.replace(/&lowast;/g, '∗');\n  str = str.replace(/&radic;/g, '√');\n  str = str.replace(/&prop;/g, '∝');\n  str = str.replace(/&infin;/g, '∞');\n  str = str.replace(/&ang;/g, '∠');\n  str = str.replace(/&and;/g, '∧');\n  str = str.replace(/&or;/g, '∨');\n  str = str.replace(/&cap;/g, '∩');\n  str = str.replace(/&cap;/g, '∪');\n  str = str.replace(/&int;/g, '∫');\n  str = str.replace(/&there4;/g, '∴');\n  str = str.replace(/&sim;/g, '∼');\n  str = str.replace(/&cong;/g, '≅');\n  str = str.replace(/&asymp;/g, '≈');\n  str = str.replace(/&ne;/g, '≠');\n  str = str.replace(/&le;/g, '≤');\n  str = str.replace(/&ge;/g, '≥');\n  str = str.replace(/&sub;/g, '⊂');\n  str = str.replace(/&sup;/g, '⊃');\n  str = str.replace(/&nsub;/g, '⊄');\n  str = str.replace(/&sube;/g, '⊆');\n  str = str.replace(/&supe;/g, '⊇');\n  str = str.replace(/&oplus;/g, '⊕');\n  str = str.replace(/&otimes;/g, '⊗');\n  str = str.replace(/&perp;/g, '⊥');\n  str = str.replace(/&sdot;/g, '⋅');\n  return str;\n}\n\n//HTML 支持的希腊字母\nfunction strGreeceDiscode(str){\n  str = str.replace(/&Alpha;/g, 'Α');\n  str = str.replace(/&Beta;/g, 'Β');\n  str = str.replace(/&Gamma;/g, 'Γ');\n  str = str.replace(/&Delta;/g, 'Δ');\n  str = str.replace(/&Epsilon;/g, 'Ε');\n  str = str.replace(/&Zeta;/g, 'Ζ');\n  str = str.replace(/&Eta;/g, 'Η');\n  str = str.replace(/&Theta;/g, 'Θ');\n  str = str.replace(/&Iota;/g, 'Ι');\n  str = str.replace(/&Kappa;/g, 'Κ');\n  str = str.replace(/&Lambda;/g, 'Λ');\n  str = str.replace(/&Mu;/g, 'Μ');\n  str = str.replace(/&Nu;/g, 'Ν');\n  str = str.replace(/&Xi;/g, 'Ν');\n  str = str.replace(/&Omicron;/g, 'Ο');\n  str = str.replace(/&Pi;/g, 'Π');\n  str = str.replace(/&Rho;/g, 'Ρ');\n  str = str.replace(/&Sigma;/g, 'Σ');\n  str = str.replace(/&Tau;/g, 'Τ');\n  str = str.replace(/&Upsilon;/g, 'Υ');\n  str = str.replace(/&Phi;/g, 'Φ');\n  str = str.replace(/&Chi;/g, 'Χ');\n  str = str.replace(/&Psi;/g, 'Ψ');\n  str = str.replace(/&Omega;/g, 'Ω');\n\n  str = str.replace(/&alpha;/g, 'α');\n  str = str.replace(/&beta;/g, 'β');\n  str = str.replace(/&gamma;/g, 'γ');\n  str = str.replace(/&delta;/g, 'δ');\n  str = str.replace(/&epsilon;/g, 'ε');\n  str = str.replace(/&zeta;/g, 'ζ');\n  str = str.replace(/&eta;/g, 'η');\n  str = str.replace(/&theta;/g, 'θ');\n  str = str.replace(/&iota;/g, 'ι');\n  str = str.replace(/&kappa;/g, 'κ');\n  str = str.replace(/&lambda;/g, 'λ');\n  str = str.replace(/&mu;/g, 'μ');\n  str = str.replace(/&nu;/g, 'ν');\n  str = str.replace(/&xi;/g, 'ξ');\n  str = str.replace(/&omicron;/g, 'ο');\n  str = str.replace(/&pi;/g, 'π');\n  str = str.replace(/&rho;/g, 'ρ');\n  str = str.replace(/&sigmaf;/g, 'ς');\n  str = str.replace(/&sigma;/g, 'σ');\n  str = str.replace(/&tau;/g, 'τ');\n  str = str.replace(/&upsilon;/g, 'υ');\n  str = str.replace(/&phi;/g, 'φ');\n  str = str.replace(/&chi;/g, 'χ');\n  str = str.replace(/&psi;/g, 'ψ');\n  str = str.replace(/&omega;/g, 'ω');\n  str = str.replace(/&thetasym;/g, 'ϑ');\n  str = str.replace(/&upsih;/g, 'ϒ');\n  str = str.replace(/&piv;/g, 'ϖ');\n  str = str.replace(/&middot;/g, '·');\n  return str;\n}\n\n// \n\nfunction strcharacterDiscode(str){\n  // 加入常用解析\n  str = str.replace(/&nbsp;/g, '\\xa0');\n  str = str.replace(/&quot;/g, \"'\");\n  str = str.replace(/&amp;/g, '&');\n  // str = str.replace(/&lt;/g, '‹');\n  // str = str.replace(/&gt;/g, '›');\n\n  str = str.replace(/&lt;/g, '<');\n  str = str.replace(/&gt;/g, '>');\n  str = str.replace(/&#8226;/g, '•');\n\n  return str;\n}\n\n// HTML 支持的其他实体\nfunction strOtherDiscode(str){\n  str = str.replace(/&OElig;/g, 'Œ');\n  str = str.replace(/&oelig;/g, 'œ');\n  str = str.replace(/&Scaron;/g, 'Š');\n  str = str.replace(/&scaron;/g, 'š');\n  str = str.replace(/&Yuml;/g, 'Ÿ');\n  str = str.replace(/&fnof;/g, 'ƒ');\n  str = str.replace(/&circ;/g, 'ˆ');\n  str = str.replace(/&tilde;/g, '˜');\n  str = str.replace(/&ensp;/g, '');\n  str = str.replace(/&emsp;/g, '');\n  str = str.replace(/&thinsp;/g, '');\n  str = str.replace(/&zwnj;/g, '');\n  str = str.replace(/&zwj;/g, '');\n  str = str.replace(/&lrm;/g, '');\n  str = str.replace(/&rlm;/g, '');\n  str = str.replace(/&ndash;/g, '–');\n  str = str.replace(/&mdash;/g, '—');\n  str = str.replace(/&lsquo;/g, '‘');\n  str = str.replace(/&rsquo;/g, '’');\n  str = str.replace(/&sbquo;/g, '‚');\n  str = str.replace(/&ldquo;/g, '“');\n  str = str.replace(/&rdquo;/g, '”');\n  str = str.replace(/&bdquo;/g, '„');\n  str = str.replace(/&dagger;/g, '†');\n  str = str.replace(/&Dagger;/g, '‡');\n  str = str.replace(/&bull;/g, '•');\n  str = str.replace(/&hellip;/g, '…');\n  str = str.replace(/&permil;/g, '‰');\n  str = str.replace(/&prime;/g, '′');\n  str = str.replace(/&Prime;/g, '″');\n  str = str.replace(/&lsaquo;/g, '‹');\n  str = str.replace(/&rsaquo;/g, '›');\n  str = str.replace(/&oline;/g, '‾');\n  str = str.replace(/&euro;/g, '€');\n  str = str.replace(/&trade;/g, '™');\n\n  str = str.replace(/&larr;/g, '←');\n  str = str.replace(/&uarr;/g, '↑');\n  str = str.replace(/&rarr;/g, '→');\n  str = str.replace(/&darr;/g, '↓');\n  str = str.replace(/&harr;/g, '↔');\n  str = str.replace(/&crarr;/g, '↵');\n  str = str.replace(/&lceil;/g, '⌈');\n  str = str.replace(/&rceil;/g, '⌉');\n\n  str = str.replace(/&lfloor;/g, '⌊');\n  str = str.replace(/&rfloor;/g, '⌋');\n  str = str.replace(/&loz;/g, '◊');\n  str = str.replace(/&spades;/g, '♠');\n  str = str.replace(/&clubs;/g, '♣');\n  str = str.replace(/&hearts;/g, '♥');\n\n  str = str.replace(/&diams;/g, '♦');\n  str = str.replace(/&#39;/g, '\\'');\n  return str;\n}\n\nfunction strMoreDiscode(str){\n  // str = str.replace(/\\r\\n/g,\"\");  \n  // str = str.replace(/\\n/g,\"\");\n\n  // str = str.replace(/code/g,\"wxxxcode-style\");\n  return str;\n}\n\nfunction strDiscode(str){\n  str = strNumDiscode(str);\n  str = strGreeceDiscode(str);\n  str = strcharacterDiscode(str);\n  str = strOtherDiscode(str);\n  str = strMoreDiscode(str);\n  return str;\n}\nfunction urlToHttpUrl(url,rep){\n  \n  var patt1 = new RegExp(\"^//\");\n  var result = patt1.test(url);\n  if(result){\n      url = rep+\":\"+url;\n  }\n  return  url;\n}\n\nmodule.exports = {\n  strDiscode:strDiscode,\n  urlToHttpUrl:urlToHttpUrl\n}","/**\n * \n * htmlParser改造自: https://github.com/blowsie/Pure-JavaScript-HTML5-Parser\n * \n */\n\n// Regular Expressions for parsing tags and attributes\nvar startTag = /^<([-A-Za-z0-9_]+)((?:\\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/,\n\tendTag = /^<\\/([-A-Za-z0-9_]+)[^>]*>/,\n\tattr = /([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\n\nvar codeTag = /^<code.*?>([\\s\\S]*?)<\\/code>/\n\n// Empty Elements - HTML 5\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\n\n// Block Elements - HTML 5\nvar block = makeMap(\"a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\n\n// Inline Elements - HTML 5\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\n\n// Attributes that have their values filled in disabled=\"disabled\"\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\n\n// Special Elements (can contain anything)\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\n\n// 存储code标签的内容\nvar codeContent = '';\n\nfunction HTMLParser(html, handler) {\n\tvar index, chars, match, stack = [], last = html;\n\tstack.last = function () {\n\t\treturn this[this.length - 1];\n\t};\n\n\twhile (html) {\n\t\tchars = true;\n\n\t\t// Make sure we're not in a script or style element\n\t\tif (!stack.last() || !special[stack.last()]) {\n\n\t\t\t// Comment\n\t\t\tif (html.indexOf(\"<!--\") == 0) {\n\t\t\t\tindex = html.indexOf(\"-->\");\n\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tif (handler.comment)\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\n\t\t\t\t\thtml = html.substring(index + 3);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\n\t\t\t\t// end tag\n\t\t\t} else if (html.indexOf(\"</\") == 0) {\n\t\t\t\tmatch = html.match(endTag);\n\n\t\t\t\tif (match) {\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tmatch[0].replace(endTag, parseEndTag);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\n\t\t\t\t// start tag\n\t\t\t} else if (html.indexOf(\"<\") == 0) {\n\t\t\t\tmatch = html.match(startTag);\n\n\t\t\t\tif (match) {\n\t\t\t\t\tvar tagName = match[1]\n\t\t\t\t\t// code标签需要过滤文本节点\n\t\t\t\t\tif (tagName === 'code') {\n\t\t\t\t\t\tvar codeTagMatch = html.match(codeTag)\n\t\t\t\t\t\tcodeContent = codeTagMatch[1] || ''\n\t\t\t\t\t}\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tmatch[0].replace(startTag, parseStartTag);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (chars) {\n\t\t\t\tindex = html.indexOf(\"<\");\n\t\t\t\tvar text = ''\n\t\t\t\twhile (index === 0) {\n\t\t\t\t\ttext += \"<\";\n\t\t\t\t\thtml = html.substring(1);\n\t\t\t\t\tindex = html.indexOf(\"<\");\n\t\t\t\t}\n\t\t\t\ttext += index < 0 ? html : html.substring(0, index);\n\t\t\t\thtml = index < 0 ? \"\" : html.substring(index);\n\n\t\t\t\tif (handler.chars && text.trim() !== '') {\n\t\t\t\t\thandler.chars(text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\thtml = html.replace(new RegExp(\"([\\\\s\\\\S]*?)<\\/\" + stack.last() + \"[^>]*>\"), function (all, text) {\n\t\t\t\ttext = text.replace(/<!--([\\s\\S]*?)-->|<!\\[CDATA\\[([\\s\\S]*?)]]>/g, \"$1$2\");\n\t\t\t\tif (handler.chars && text.trim() !== '')\n\t\t\t\t\thandler.chars(text);\n\n\t\t\t\treturn \"\";\n\t\t\t});\n\n\n\t\t\tparseEndTag(\"\", stack.last());\n\t\t}\n\n\t\tif (html == last)\n\t\t\tthrow \"Parse Error: \" + html;\n\t\tlast = html;\n\t}\n\n\t// Clean up any remaining tags\n\tparseEndTag();\n\n\tfunction parseStartTag(tag, tagName, rest, unary) {\n\t\ttagName = tagName.toLowerCase();\n\n\t\tif (block[tagName]) {\n\t\t\twhile (stack.last() && inline[stack.last()]) {\n\t\t\t\tparseEndTag(\"\", stack.last());\n\t\t\t}\n\t\t}\n\n\t\tif (closeSelf[tagName] && stack.last() == tagName) {\n\t\t\tparseEndTag(\"\", tagName);\n\t\t}\n\n\t\tunary = empty[tagName] || !!unary;\n\n\t\tif (!unary)\n\t\t\tstack.push(tagName);\n\n\t\tif (handler.start) {\n\t\t\tvar attrs = [];\n\n\t\t\trest.replace(attr, function (match, name) {\n\t\t\t\tvar value = arguments[2] ? arguments[2] :\n\t\t\t\t\targuments[3] ? arguments[3] :\n\t\t\t\t\t\targuments[4] ? arguments[4] :\n\t\t\t\t\t\t\tfillAttrs[name] ? name : \"\";\n\n\t\t\t\tattrs.push({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tescaped: value.replace(/(^|[^\\\\])\"/g, '$1\\\\\\\"') //\"\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (handler.start) {\n\t\t\t\tvar tagContent = codeContent || ''\n\t\t\t\thandler.start(tagName, attrs, unary, tagContent);\n\t\t\t\t// 重置\n\t\t\t\tcodeContent = ''\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction parseEndTag(tag, tagName) {\n\t\t// If no tag name is provided, clean shop\n\t\tif (!tagName)\n\t\t\tvar pos = 0;\n\n\t\t// Find the closest opened tag of the same type\n\t\telse {\n\t\t\ttagName = tagName.toLowerCase();\n\t\t\tfor (var pos = stack.length - 1; pos >= 0; pos--)\n\t\t\t\tif (stack[pos] == tagName)\n\t\t\t\t\tbreak;\n\t\t}\n\t\tif (pos >= 0) {\n\t\t\t// Close all the open elements, up the stack\n\t\t\tfor (var i = stack.length - 1; i >= pos; i--)\n\t\t\t\tif (handler.end)\n\t\t\t\t\thandler.end(stack[i]);\n\n\t\t\t// Remove the open elements from the stack\n\t\t\tstack.length = pos;\n\t\t}\n\t}\n};\n\n\nfunction makeMap(str) {\n\tvar obj = {}, items = str.split(\",\");\n\tfor (var i = 0; i < items.length; i++)\n\t\tobj[items[i]] = true;\n\treturn obj;\n}\n\nmodule.exports = HTMLParser;\n","/**\n * showdown: https://github.com/showdownjs/showdown\n */\n\nfunction getDefaultOpts(simple) {\n  'use strict';\n\n  var defaultOptions = {\n    omitExtraWLInCodeBlocks: {\n      defaultValue: false,\n      describe: 'Omit the default extra whiteline added to code blocks',\n      type: 'boolean'\n    },\n    noHeaderId: {\n      defaultValue: false,\n      describe: 'Turn on/off generated header id',\n      type: 'boolean'\n    },\n    prefixHeaderId: {\n      defaultValue: false,\n      describe: 'Specify a prefix to generated header ids',\n      type: 'string'\n    },\n    headerLevelStart: {\n      defaultValue: false,\n      describe: 'The header blocks level start',\n      type: 'integer'\n    },\n    parseImgDimensions: {\n      defaultValue: false,\n      describe: 'Turn on/off image dimension parsing',\n      type: 'boolean'\n    },\n    simplifiedAutoLink: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM autolink style',\n      type: 'boolean'\n    },\n    literalMidWordUnderscores: {\n      defaultValue: false,\n      describe: 'Parse midword underscores as literal underscores',\n      type: 'boolean'\n    },\n    strikethrough: {\n      defaultValue: false,\n      describe: 'Turn on/off strikethrough support',\n      type: 'boolean'\n    },\n    tables: {\n      defaultValue: false,\n      describe: 'Turn on/off tables support',\n      type: 'boolean'\n    },\n    tablesHeaderId: {\n      defaultValue: false,\n      describe: 'Add an id to table headers',\n      type: 'boolean'\n    },\n    ghCodeBlocks: {\n      defaultValue: true,\n      describe: 'Turn on/off GFM fenced code blocks support',\n      type: 'boolean'\n    },\n    tasklists: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM tasklist support',\n      type: 'boolean'\n    },\n    smoothLivePreview: {\n      defaultValue: false,\n      describe: 'Prevents weird effects in live previews due to incomplete input',\n      type: 'boolean'\n    },\n    smartIndentationFix: {\n      defaultValue: false,\n      description: 'Tries to smartly fix identation in es6 strings',\n      type: 'boolean'\n    }\n  };\n  if (simple === false) {\n    return JSON.parse(JSON.stringify(defaultOptions));\n  }\n  var ret = {};\n  for (var opt in defaultOptions) {\n    if (defaultOptions.hasOwnProperty(opt)) {\n      ret[opt] = defaultOptions[opt].defaultValue;\n    }\n  }\n  return ret;\n}\n\n/**\n * Created by Tivie on 06-01-2015.\n */\n\n// Private properties\nvar showdown = {},\n    parsers = {},\n    extensions = {},\n    globalOptions = getDefaultOpts(true),\n    flavor = {\n      github: {\n        omitExtraWLInCodeBlocks:   true,\n        prefixHeaderId:            'user-content-',\n        simplifiedAutoLink:        true,\n        literalMidWordUnderscores: true,\n        strikethrough:             true,\n        tables:                    true,\n        tablesHeaderId:            true,\n        ghCodeBlocks:              true,\n        tasklists:                 true\n      },\n      vanilla: getDefaultOpts(true)\n    };\n\n/**\n * helper namespace\n * @type {{}}\n */\nshowdown.helper = {};\n\n/**\n * TODO LEGACY SUPPORT CODE\n * @type {{}}\n */\nshowdown.extensions = {};\n\n/**\n * Set a global option\n * @static\n * @param {string} key\n * @param {*} value\n * @returns {showdown}\n */\nshowdown.setOption = function (key, value) {\n  'use strict';\n  globalOptions[key] = value;\n  return this;\n};\n\n/**\n * Get a global option\n * @static\n * @param {string} key\n * @returns {*}\n */\nshowdown.getOption = function (key) {\n  'use strict';\n  return globalOptions[key];\n};\n\n/**\n * Get the global options\n * @static\n * @returns {{}}\n */\nshowdown.getOptions = function () {\n  'use strict';\n  return globalOptions;\n};\n\n/**\n * Reset global options to the default values\n * @static\n */\nshowdown.resetOptions = function () {\n  'use strict';\n  globalOptions = getDefaultOpts(true);\n};\n\n/**\n * Set the flavor showdown should use as default\n * @param {string} name\n */\nshowdown.setFlavor = function (name) {\n  'use strict';\n  if (flavor.hasOwnProperty(name)) {\n    var preset = flavor[name];\n    for (var option in preset) {\n      if (preset.hasOwnProperty(option)) {\n        globalOptions[option] = preset[option];\n      }\n    }\n  }\n};\n\n/**\n * Get the default options\n * @static\n * @param {boolean} [simple=true]\n * @returns {{}}\n */\nshowdown.getDefaultOptions = function (simple) {\n  'use strict';\n  return getDefaultOpts(simple);\n};\n\n/**\n * Get or set a subParser\n *\n * subParser(name)       - Get a registered subParser\n * subParser(name, func) - Register a subParser\n * @static\n * @param {string} name\n * @param {function} [func]\n * @returns {*}\n */\nshowdown.subParser = function (name, func) {\n  'use strict';\n  if (showdown.helper.isString(name)) {\n    if (typeof func !== 'undefined') {\n      parsers[name] = func;\n    } else {\n      if (parsers.hasOwnProperty(name)) {\n        return parsers[name];\n      } else {\n        throw Error('SubParser named ' + name + ' not registered!');\n      }\n    }\n  }\n};\n\n/**\n * Gets or registers an extension\n * @static\n * @param {string} name\n * @param {object|function=} ext\n * @returns {*}\n */\nshowdown.extension = function (name, ext) {\n  'use strict';\n\n  if (!showdown.helper.isString(name)) {\n    throw Error('Extension \\'name\\' must be a string');\n  }\n\n  name = showdown.helper.stdExtName(name);\n\n  // Getter\n  if (showdown.helper.isUndefined(ext)) {\n    if (!extensions.hasOwnProperty(name)) {\n      throw Error('Extension named ' + name + ' is not registered!');\n    }\n    return extensions[name];\n\n    // Setter\n  } else {\n    // Expand extension if it's wrapped in a function\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    // Ensure extension is an array\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExtension = validate(ext, name);\n\n    if (validExtension.valid) {\n      extensions[name] = ext;\n    } else {\n      throw Error(validExtension.error);\n    }\n  }\n};\n\n/**\n * Gets all extensions registered\n * @returns {{}}\n */\nshowdown.getAllExtensions = function () {\n  'use strict';\n  return extensions;\n};\n\n/**\n * Remove an extension\n * @param {string} name\n */\nshowdown.removeExtension = function (name) {\n  'use strict';\n  delete extensions[name];\n};\n\n/**\n * Removes all extensions\n */\nshowdown.resetExtensions = function () {\n  'use strict';\n  extensions = {};\n};\n\n/**\n * Validate extension\n * @param {array} extension\n * @param {string} name\n * @returns {{valid: boolean, error: string}}\n */\nfunction validate(extension, name) {\n  'use strict';\n\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\n    ret = {\n      valid: true,\n      error: ''\n    };\n\n  if (!showdown.helper.isArray(extension)) {\n    extension = [extension];\n  }\n\n  for (var i = 0; i < extension.length; ++i) {\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\n        ext = extension[i];\n    if (typeof ext !== 'object') {\n      ret.valid = false;\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\n      return ret;\n    }\n\n    if (!showdown.helper.isString(ext.type)) {\n      ret.valid = false;\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\n      return ret;\n    }\n\n    var type = ext.type = ext.type.toLowerCase();\n\n    // normalize extension type\n    if (type === 'language') {\n      type = ext.type = 'lang';\n    }\n\n    if (type === 'html') {\n      type = ext.type = 'output';\n    }\n\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\n      ret.valid = false;\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\n      return ret;\n    }\n\n    if (type === 'listener') {\n      if (showdown.helper.isUndefined(ext.listeners)) {\n        ret.valid = false;\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\n        return ret;\n      }\n    } else {\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\n        ret.valid = false;\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\n        return ret;\n      }\n    }\n\n    if (ext.listeners) {\n      if (typeof ext.listeners !== 'object') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\n        return ret;\n      }\n      for (var ln in ext.listeners) {\n        if (ext.listeners.hasOwnProperty(ln)) {\n          if (typeof ext.listeners[ln] !== 'function') {\n            ret.valid = false;\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\n            return ret;\n          }\n        }\n      }\n    }\n\n    if (ext.filter) {\n      if (typeof ext.filter !== 'function') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\n        return ret;\n      }\n    } else if (ext.regex) {\n      if (showdown.helper.isString(ext.regex)) {\n        ext.regex = new RegExp(ext.regex, 'g');\n      }\n      if (!ext.regex instanceof RegExp) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\n        return ret;\n      }\n      if (showdown.helper.isUndefined(ext.replace)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\n        return ret;\n      }\n    }\n  }\n  return ret;\n}\n\n/**\n * Validate extension\n * @param {object} ext\n * @returns {boolean}\n */\nshowdown.validateExtension = function (ext) {\n  'use strict';\n\n  var validateExtension = validate(ext, null);\n  if (!validateExtension.valid) {\n    console.warn(validateExtension.error);\n    return false;\n  }\n  return true;\n};\n\n/**\n * showdownjs helper functions\n */\n\nif (!showdown.hasOwnProperty('helper')) {\n  showdown.helper = {};\n}\n\n/**\n * Check if var is string\n * @static\n * @param {string} a\n * @returns {boolean}\n */\nshowdown.helper.isString = function isString(a) {\n  'use strict';\n  return (typeof a === 'string' || a instanceof String);\n};\n\n/**\n * Check if var is a function\n * @static\n * @param {string} a\n * @returns {boolean}\n */\nshowdown.helper.isFunction = function isFunction(a) {\n  'use strict';\n  var getType = {};\n  return a && getType.toString.call(a) === '[object Function]';\n};\n\n/**\n * ForEach helper function\n * @static\n * @param {*} obj\n * @param {function} callback\n */\nshowdown.helper.forEach = function forEach(obj, callback) {\n  'use strict';\n  if (typeof obj.forEach === 'function') {\n    obj.forEach(callback);\n  } else {\n    for (var i = 0; i < obj.length; i++) {\n      callback(obj[i], i, obj);\n    }\n  }\n};\n\n/**\n * isArray helper function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isArray = function isArray(a) {\n  'use strict';\n  return a.constructor === Array;\n};\n\n/**\n * Check if value is undefined\n * @static\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n */\nshowdown.helper.isUndefined = function isUndefined(value) {\n  'use strict';\n  return typeof value === 'undefined';\n};\n\n/**\n * Standardidize extension name\n * @static\n * @param {string} s extension name\n * @returns {string}\n */\nshowdown.helper.stdExtName = function (s) {\n  'use strict';\n  return s.replace(/[_-]||\\s/g, '').toLowerCase();\n};\n\nfunction escapeCharactersCallback(wholeMatch, m1) {\n  'use strict';\n  var charCodeToEscape = m1.charCodeAt(0);\n  return '~E' + charCodeToEscape + 'E';\n}\n\n/**\n * Callback used to escape characters when passing through String.replace\n * @static\n * @param {string} wholeMatch\n * @param {string} m1\n * @returns {string}\n */\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\n\n/**\n * Escape characters in a string\n * @static\n * @param {string} text\n * @param {string} charsToEscape\n * @param {boolean} afterBackslash\n * @returns {XML|string|void|*}\n */\nshowdown.helper.escapeCharacters = function escapeCharacters(text, charsToEscape, afterBackslash) {\n  'use strict';\n  // First we have to escape the escape characters so that\n  // we can build a character class out of them\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\n\n  if (afterBackslash) {\n    regexString = '\\\\\\\\' + regexString;\n  }\n\n  var regex = new RegExp(regexString, 'g');\n  text = text.replace(regex, escapeCharactersCallback);\n\n  return text;\n};\n\nvar rgxFindMatchPos = function (str, left, right, flags) {\n  'use strict';\n  var f = flags || '',\n    g = f.indexOf('g') > -1,\n    x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\n    l = new RegExp(left, f.replace(/g/g, '')),\n    pos = [],\n    t, s, m, start, end;\n\n  do {\n    t = 0;\n    while ((m = x.exec(str))) {\n      if (l.test(m[0])) {\n        if (!(t++)) {\n          s = x.lastIndex;\n          start = s - m[0].length;\n        }\n      } else if (t) {\n        if (!--t) {\n          end = m.index + m[0].length;\n          var obj = {\n            left: {start: start, end: s},\n            match: {start: s, end: m.index},\n            right: {start: m.index, end: end},\n            wholeMatch: {start: start, end: end}\n          };\n          pos.push(obj);\n          if (!g) {\n            return pos;\n          }\n        }\n      }\n    }\n  } while (t && (x.lastIndex = s));\n\n  return pos;\n};\n\n/**\n * matchRecursiveRegExp\n *\n * (c) 2007 Steven Levithan <stevenlevithan.com>\n * MIT License\n *\n * Accepts a string to search, a left and right format delimiter\n * as regex patterns, and optional regex flags. Returns an array\n * of matches, allowing nested instances of left/right delimiters.\n * Use the \"g\" flag to return all matches, otherwise only the\n * first is returned. Be careful to ensure that the left and\n * right format delimiters produce mutually exclusive matches.\n * Backreferences are not supported within the right delimiter\n * due to how it is internally combined with the left delimiter.\n * When matching strings whose format delimiters are unbalanced\n * to the left or right, the output is intentionally as a\n * conventional regex library with recursion support would\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\n * \"<\" and \">\" as the delimiters (both strings contain a single,\n * balanced instance of \"<x>\").\n *\n * examples:\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\n * returns: []\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\n * returns: [\"t<<e>><s>\", \"\"]\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\n * returns: [\"test\"]\n */\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\n  'use strict';\n\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\n    results = [];\n\n  for (var i = 0; i < matchPos.length; ++i) {\n    results.push([\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\n    ]);\n  }\n  return results;\n};\n\n/**\n *\n * @param {string} str\n * @param {string|function} replacement\n * @param {string} left\n * @param {string} right\n * @param {string} flags\n * @returns {string}\n */\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\n  'use strict';\n\n  if (!showdown.helper.isFunction(replacement)) {\n    var repStr = replacement;\n    replacement = function () {\n      return repStr;\n    };\n  }\n\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\n      finalStr = str,\n      lng = matchPos.length;\n\n  if (lng > 0) {\n    var bits = [];\n    if (matchPos[0].wholeMatch.start !== 0) {\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\n    }\n    for (var i = 0; i < lng; ++i) {\n      bits.push(\n        replacement(\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\n        )\n      );\n      if (i < lng - 1) {\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\n      }\n    }\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\n    }\n    finalStr = bits.join('');\n  }\n  return finalStr;\n};\n\n/**\n * POLYFILLS\n */\nif (showdown.helper.isUndefined(console)) {\n  console = {\n    warn: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    log: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    error: function (msg) {\n      'use strict';\n      throw msg;\n    }\n  };\n}\n\n/**\n * Created by Estevao on 31-05-2015.\n */\n\n/**\n * Showdown Converter class\n * @class\n * @param {object} [converterOptions]\n * @returns {Converter}\n */\nshowdown.Converter = function (converterOptions) {\n  'use strict';\n\n  var\n      /**\n       * Options used by this converter\n       * @private\n       * @type {{}}\n       */\n      options = {},\n\n      /**\n       * Language extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      langExtensions = [],\n\n      /**\n       * Output modifiers extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      outputModifiers = [],\n\n      /**\n       * Event listeners\n       * @private\n       * @type {{}}\n       */\n      listeners = {};\n\n  _constructor();\n\n  /**\n   * Converter constructor\n   * @private\n   */\n  function _constructor() {\n    converterOptions = converterOptions || {};\n\n    for (var gOpt in globalOptions) {\n      if (globalOptions.hasOwnProperty(gOpt)) {\n        options[gOpt] = globalOptions[gOpt];\n      }\n    }\n\n    // Merge options\n    if (typeof converterOptions === 'object') {\n      for (var opt in converterOptions) {\n        if (converterOptions.hasOwnProperty(opt)) {\n          options[opt] = converterOptions[opt];\n        }\n      }\n    } else {\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\n      ' was passed instead.');\n    }\n\n    if (options.extensions) {\n      showdown.helper.forEach(options.extensions, _parseExtension);\n    }\n  }\n\n  /**\n   * Parse extension\n   * @param {*} ext\n   * @param {string} [name='']\n   * @private\n   */\n  function _parseExtension(ext, name) {\n\n    name = name || null;\n    // If it's a string, the extension was previously loaded\n    if (showdown.helper.isString(ext)) {\n      ext = showdown.helper.stdExtName(ext);\n      name = ext;\n\n      // LEGACY_SUPPORT CODE\n      if (showdown.extensions[ext]) {\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\n          'Please inform the developer that the extension should be updated!');\n        legacyExtensionLoading(showdown.extensions[ext], ext);\n        return;\n      // END LEGACY SUPPORT CODE\n\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\n        ext = extensions[ext];\n\n      } else {\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\n      }\n    }\n\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExt = validate(ext, name);\n    if (!validExt.valid) {\n      throw Error(validExt.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n      }\n      if (ext[i].hasOwnProperty(listeners)) {\n        for (var ln in ext[i].listeners) {\n          if (ext[i].listeners.hasOwnProperty(ln)) {\n            listen(ln, ext[i].listeners[ln]);\n          }\n        }\n      }\n    }\n\n  }\n\n  /**\n   * LEGACY_SUPPORT\n   * @param {*} ext\n   * @param {string} name\n   */\n  function legacyExtensionLoading(ext, name) {\n    if (typeof ext === 'function') {\n      ext = ext(new showdown.Converter());\n    }\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n    var valid = validate(ext, name);\n\n    if (!valid.valid) {\n      throw Error(valid.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n        default:// should never reach here\n          throw Error('Extension loader error: Type unrecognized!!!');\n      }\n    }\n  }\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   */\n  function listen(name, callback) {\n    if (!showdown.helper.isString(name)) {\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\n    }\n\n    if (typeof callback !== 'function') {\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\n    }\n\n    if (!listeners.hasOwnProperty(name)) {\n      listeners[name] = [];\n    }\n    listeners[name].push(callback);\n  }\n\n  function rTrimInputText(text) {\n    var rsp = text.match(/^\\s*/)[0].length,\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\n    return text.replace(rgx, '');\n  }\n\n  /**\n   * Dispatch an event\n   * @private\n   * @param {string} evtName Event name\n   * @param {string} text Text\n   * @param {{}} options Converter Options\n   * @param {{}} globals\n   * @returns {string}\n   */\n  this._dispatch = function dispatch (evtName, text, options, globals) {\n    if (listeners.hasOwnProperty(evtName)) {\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\n        if (nText && typeof nText !== 'undefined') {\n          text = nText;\n        }\n      }\n    }\n    return text;\n  };\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   * @returns {showdown.Converter}\n   */\n  this.listen = function (name, callback) {\n    listen(name, callback);\n    return this;\n  };\n\n  /**\n   * Converts a markdown string into HTML\n   * @param {string} text\n   * @returns {*}\n   */\n  this.makeHtml = function (text) {\n    //check if text is not falsy\n    if (!text) {\n      return text;\n    }\n\n    var globals = {\n      gHtmlBlocks:     [],\n      gHtmlMdBlocks:   [],\n      gHtmlSpans:      [],\n      gUrls:           {},\n      gTitles:         {},\n      gDimensions:     {},\n      gListLevel:      0,\n      hashLinkCounts:  {},\n      langExtensions:  langExtensions,\n      outputModifiers: outputModifiers,\n      converter:       this,\n      ghCodeBlocks:    []\n    };\n\n    // attacklab: Replace ~ with ~T\n    // This lets us use tilde as an escape char to avoid md5 hashes\n    // The choice of character is arbitrary; anything that isn't\n    // magic in Markdown will work.\n    text = text.replace(/~/g, '~T');\n\n    // attacklab: Replace $ with ~D\n    // RegExp interprets $ as a special character\n    // when it's in a replacement string\n    text = text.replace(/\\$/g, '~D');\n\n    // Standardize line endings\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\n\n    if (options.smartIndentationFix) {\n      text = rTrimInputText(text);\n    }\n\n    // Make sure text begins and ends with a couple of newlines:\n    //text = '\\n\\n' + text + '\\n\\n';\n    text = text;\n    // detab\n    text = showdown.subParser('detab')(text, options, globals);\n\n    // stripBlankLines\n    text = showdown.subParser('stripBlankLines')(text, options, globals);\n\n    //run languageExtensions\n    showdown.helper.forEach(langExtensions, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // run the sub parsers\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n    text = showdown.subParser('hashHTMLSpans')(text, options, globals);\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\n    text = showdown.subParser('blockGamut')(text, options, globals);\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\n\n    // attacklab: Restore dollar signs\n    text = text.replace(/~D/g, '$$');\n\n    // attacklab: Restore tildes\n    text = text.replace(/~T/g, '~');\n\n    // Run output modifiers\n    showdown.helper.forEach(outputModifiers, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n    return text;\n  };\n\n  /**\n   * Set an option of this Converter instance\n   * @param {string} key\n   * @param {*} value\n   */\n  this.setOption = function (key, value) {\n    options[key] = value;\n  };\n\n  /**\n   * Get the option of this Converter instance\n   * @param {string} key\n   * @returns {*}\n   */\n  this.getOption = function (key) {\n    return options[key];\n  };\n\n  /**\n   * Get the options of this Converter instance\n   * @returns {{}}\n   */\n  this.getOptions = function () {\n    return options;\n  };\n\n  /**\n   * Add extension to THIS converter\n   * @param {{}} extension\n   * @param {string} [name=null]\n   */\n  this.addExtension = function (extension, name) {\n    name = name || null;\n    _parseExtension(extension, name);\n  };\n\n  /**\n   * Use a global registered extension with THIS converter\n   * @param {string} extensionName Name of the previously registered extension\n   */\n  this.useExtension = function (extensionName) {\n    _parseExtension(extensionName);\n  };\n\n  /**\n   * Set the flavor THIS converter should use\n   * @param {string} name\n   */\n  this.setFlavor = function (name) {\n    if (flavor.hasOwnProperty(name)) {\n      var preset = flavor[name];\n      for (var option in preset) {\n        if (preset.hasOwnProperty(option)) {\n          options[option] = preset[option];\n        }\n      }\n    }\n  };\n\n  /**\n   * Remove an extension from THIS converter.\n   * Note: This is a costly operation. It's better to initialize a new converter\n   * and specify the extensions you wish to use\n   * @param {Array} extension\n   */\n  this.removeExtension = function (extension) {\n    if (!showdown.helper.isArray(extension)) {\n      extension = [extension];\n    }\n    for (var a = 0; a < extension.length; ++a) {\n      var ext = extension[a];\n      for (var i = 0; i < langExtensions.length; ++i) {\n        if (langExtensions[i] === ext) {\n          langExtensions[i].splice(i, 1);\n        }\n      }\n      for (var ii = 0; ii < outputModifiers.length; ++i) {\n        if (outputModifiers[ii] === ext) {\n          outputModifiers[ii].splice(i, 1);\n        }\n      }\n    }\n  };\n\n  /**\n   * Get all extension of THIS converter\n   * @returns {{language: Array, output: Array}}\n   */\n  this.getAllExtensions = function () {\n    return {\n      language: langExtensions,\n      output: outputModifiers\n    };\n  };\n};\n\n/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('anchors', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\n\n  var writeAnchorTag = function (wholeMatch, m1, m2, m3, m4, m5, m6, m7) {\n    if (showdown.helper.isUndefined(m7)) {\n      m7 = '';\n    }\n    wholeMatch = m1;\n    var linkText = m2,\n        linkId = m3.toLowerCase(),\n        url = m4,\n        title = m7;\n\n    if (!url) {\n      if (!linkId) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\n        url = globals.gUrls[linkId];\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\n          title = globals.gTitles[linkId];\n        }\n      } else {\n        if (wholeMatch.search(/\\(\\s*\\)$/m) > -1) {\n          // Special case for explicit empty url\n          url = '';\n        } else {\n          return wholeMatch;\n        }\n      }\n    }\n\n    url = showdown.helper.escapeCharacters(url, '*_', false);\n    var result = '<a href=\"' + url + '\"';\n\n    if (title !== '' && title !== null) {\n      title = title.replace(/\"/g, '&quot;');\n      title = showdown.helper.escapeCharacters(title, '*_', false);\n      result += ' title=\"' + title + '\"';\n    }\n\n    result += '>' + linkText + '</a>';\n\n    return result;\n  };\n\n  // First, handle reference-style links: [link text] [id]\n  /*\n   text = text.replace(/\n   (\t\t\t\t\t\t\t// wrap whole match in $1\n   \\[\n   (\n   (?:\n   \\[[^\\]]*\\]\t\t// allow brackets nested one level\n   |\n   [^\\[]\t\t\t// or anything else\n   )*\n   )\n   \\]\n\n   [ ]?\t\t\t\t\t// one optional space\n   (?:\\n[ ]*)?\t\t\t\t// one optional newline followed by spaces\n\n   \\[\n   (.*?)\t\t\t\t\t// id = $3\n   \\]\n   )()()()()\t\t\t\t\t// pad remaining backreferences\n   /g,_DoAnchors_callback);\n   */\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)][ ]?(?:\\n[ ]*)?\\[(.*?)])()()()()/g, writeAnchorTag);\n\n  //\n  // Next, inline-style links: [link text](url \"optional title\")\n  //\n\n  /*\n   text = text.replace(/\n   (\t\t\t\t\t\t// wrap whole match in $1\n   \\[\n   (\n   (?:\n   \\[[^\\]]*\\]\t// allow brackets nested one level\n   |\n   [^\\[\\]]\t\t\t// or anything else\n   )\n   )\n   \\]\n   \\(\t\t\t\t\t\t// literal paren\n   [ \\t]*\n   ()\t\t\t\t\t\t// no id, so leave $3 empty\n   <?(.*?)>?\t\t\t\t// href = $4\n   [ \\t]*\n   (\t\t\t\t\t\t// $5\n   (['\"])\t\t\t\t// quote char = $6\n   (.*?)\t\t\t\t// Title = $7\n   \\6\t\t\t\t\t// matching quote\n   [ \\t]*\t\t\t\t// ignore any spaces/tabs between closing quote and )\n   )?\t\t\t\t\t\t// title is optional\n   \\)\n   )\n   /g,writeAnchorTag);\n   */\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]\\([ \\t]*()<?(.*?(?:\\(.*?\\).*?)?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g,\n                      writeAnchorTag);\n\n  //\n  // Last, handle reference-style shortcuts: [link text]\n  // These must come last in case you've also got [link test][1]\n  // or [link test](/foo)\n  //\n\n  /*\n   text = text.replace(/\n   (                // wrap whole match in $1\n   \\[\n   ([^\\[\\]]+)       // link text = $2; can't contain '[' or ']'\n   \\]\n   )()()()()()      // pad rest of backreferences\n   /g, writeAnchorTag);\n   */\n  text = text.replace(/(\\[([^\\[\\]]+)])()()()()()/g, writeAnchorTag);\n\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\n  return text;\n});\n\nshowdown.subParser('autoLinks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\n\n  var simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+)(?=\\s|$)(?![\"<>])/gi,\n      delimUrlRegex   = /<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)>/gi,\n      simpleMailRegex = /(?:^|[ \\n\\t])([A-Za-z0-9!#$%&'*+-/=?^_`\\{|}~\\.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?:$|[ \\n\\t])/gi,\n      delimMailRegex  = /<(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi;\n\n  text = text.replace(delimUrlRegex, replaceLink);\n  text = text.replace(delimMailRegex, replaceMail);\n  // simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[-.+~:?#@!$&'()*,;=[\\]\\w]+)\\b/gi,\n  // Email addresses: <address@domain.foo>\n\n  if (options.simplifiedAutoLink) {\n    text = text.replace(simpleURLRegex, replaceLink);\n    text = text.replace(simpleMailRegex, replaceMail);\n  }\n\n  function replaceLink(wm, link) {\n    var lnkTxt = link;\n    if (/^www\\./i.test(link)) {\n      link = link.replace(/^www\\./i, 'http://www.');\n    }\n    return '<a href=\"' + link + '\">' + lnkTxt + '</a>';\n  }\n\n  function replaceMail(wholeMatch, m1) {\n    var unescapedStr = showdown.subParser('unescapeSpecialChars')(m1);\n    return showdown.subParser('encodeEmailAddress')(unescapedStr);\n  }\n\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\n\n  return text;\n});\n\n/**\n * These are all the transformations that form block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('blockGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\n\n  // we parse blockquotes first so that we can have headings and hrs\n  // inside blockquotes\n  text = showdown.subParser('blockQuotes')(text, options, globals);\n  text = showdown.subParser('headers')(text, options, globals);\n\n  // Do Horizontal Rules:\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\n  text = text.replace(/^[ ]{0,2}([ ]?\\*[ ]?){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^[ ]{0,2}([ ]?\\-[ ]?){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \\t]*$/gm, key);\n\n  text = showdown.subParser('lists')(text, options, globals);\n  text = showdown.subParser('codeBlocks')(text, options, globals);\n  text = showdown.subParser('tables')(text, options, globals);\n\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\n  // was to escape raw HTML in the original Markdown source. This time,\n  // we're escaping the markup we've just created, so that we don't wrap\n  // <p> tags around block-level tags.\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n  text = showdown.subParser('paragraphs')(text, options, globals);\n\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\n\n  return text;\n});\n\nshowdown.subParser('blockQuotes', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\n  /*\n   text = text.replace(/\n   (\t\t\t\t\t\t\t\t// Wrap whole match in $1\n   (\n   ^[ \\t]*>[ \\t]?\t\t\t// '>' at the start of a line\n   .+\\n\t\t\t\t\t// rest of the first line\n   (.+\\n)*\t\t\t\t\t// subsequent consecutive lines\n   \\n*\t\t\t\t\t\t// blanks\n   )+\n   )\n   /gm, function(){...});\n   */\n\n  text = text.replace(/((^[ \\t]{0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+)/gm, function (wholeMatch, m1) {\n    var bq = m1;\n\n    // attacklab: hack around Konqueror 3.5.4 bug:\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, '~0'); // trim one level of quoting\n\n    // attacklab: clean up hack\n    bq = bq.replace(/~0/g, '');\n\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\n\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\n    // These leading spaces screw with <pre> content, so we need to fix that:\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\n      var pre = m1;\n      // attacklab: hack around Konqueror 3.5.4 bug:\n      pre = pre.replace(/^  /mg, '~0');\n      pre = pre.replace(/~0/g, '');\n      return pre;\n    });\n\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\n  });\n\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\n  return text;\n});\n\n/**\n * Process Markdown `<pre><code>` blocks.\n */\nshowdown.subParser('codeBlocks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\n  /*\n   text = text.replace(text,\n   /(?:\\n\\n|^)\n   (\t\t\t\t\t\t\t\t// $1 = the code block -- one or more lines, starting with a space/tab\n   (?:\n   (?:[ ]{4}|\\t)\t\t\t// Lines must start with a tab or a tab-width of spaces - attacklab: g_tab_width\n   .*\\n+\n   )+\n   )\n   (\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))\t// attacklab: g_tab_width\n   /g,function(){...});\n   */\n\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '~0';\n\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))/g;\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\n    var codeblock = m1,\n        nextChar = m2,\n        end = '\\n';\n\n    codeblock = showdown.subParser('outdent')(codeblock);\n    codeblock = showdown.subParser('encodeCode')(codeblock);\n    codeblock = showdown.subParser('detab')(codeblock);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\n\n    if (options.omitExtraWLInCodeBlocks) {\n      end = '';\n    }\n\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\n\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/~0/, '');\n\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\n  return text;\n});\n\n/**\n *\n *   *  Backtick quotes are used for <code></code> spans.\n *\n *   *  You can use multiple backticks as the delimiters if you want to\n *     include literal backticks in the code span. So, this input:\n *\n *         Just type ``foo `bar` baz`` at the prompt.\n *\n *       Will translate to:\n *\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\n *\n *    There's no arbitrary limit to the number of backticks you\n *    can use as delimters. If you need three consecutive backticks\n *    in your code, use four for delimiters, etc.\n *\n *  *  You can use spaces to get literal backticks at the edges:\n *\n *         ... type `` `bar` `` ...\n *\n *       Turns to:\n *\n *         ... type <code>`bar`</code> ...\n */\nshowdown.subParser('codeSpans', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\n\n  /*\n   text = text.replace(/\n   (^|[^\\\\])\t\t\t\t\t// Character before opening ` can't be a backslash\n   (`+)\t\t\t\t\t\t// $2 = Opening run of `\n   (\t\t\t\t\t\t\t// $3 = The code block\n   [^\\r]*?\n   [^`]\t\t\t\t\t// attacklab: work around lack of lookbehind\n   )\n   \\2\t\t\t\t\t\t\t// Matching closer\n   (?!`)\n   /gm, function(){...});\n   */\n\n  if (typeof(text) === 'undefined') {\n    text = '';\n  }\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\n    function (wholeMatch, m1, m2, m3) {\n      var c = m3;\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\n      c = showdown.subParser('encodeCode')(c);\n      return m1 + '<code>' + c + '</code>';\n    }\n  );\n\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\n  return text;\n});\n\n/**\n * Convert all tabs to spaces\n */\nshowdown.subParser('detab', function (text) {\n  'use strict';\n\n  // expand first n-1 tabs\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\n\n  // replace the nth with two sentinels\n  text = text.replace(/\\t/g, '~A~B');\n\n  // use the sentinel to anchor our regex so it doesn't explode\n  text = text.replace(/~B(.+?)~A/g, function (wholeMatch, m1) {\n    var leadingText = m1,\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\n\n    // there *must* be a better way to do this:\n    for (var i = 0; i < numSpaces; i++) {\n      leadingText += ' ';\n    }\n\n    return leadingText;\n  });\n\n  // clean up sentinels\n  text = text.replace(/~A/g, '    ');  // g_tab_width\n  text = text.replace(/~B/g, '');\n\n  return text;\n\n});\n\n/**\n * Smart processing for ampersands and angle brackets that need to be encoded.\n */\nshowdown.subParser('encodeAmpsAndAngles', function (text) {\n  'use strict';\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\n  // http://bumppo.net/projects/amputator/\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\n\n  // Encode naked <'s\n  text = text.replace(/<(?![a-z\\/?\\$!])/gi, '&lt;');\n\n  return text;\n});\n\n/**\n * Returns the string, with after processing the following backslash escape sequences.\n *\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\n *\n *    text = escapeCharacters(text,\"\\\\\",true);\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\n *\n * ...but we're sidestepping its use of the (slow) RegExp constructor\n * as an optimization for Firefox.  This function gets called a LOT.\n */\nshowdown.subParser('encodeBackslashEscapes', function (text) {\n  'use strict';\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+-.!])/g, showdown.helper.escapeCharactersCallback);\n  return text;\n});\n\n/**\n * Encode/escape certain characters inside Markdown code runs.\n * The point is that in code, these characters are literals,\n * and lose their special Markdown meanings.\n */\nshowdown.subParser('encodeCode', function (text) {\n  'use strict';\n\n  // Encode all ampersands; HTML entities are not\n  // entities within a Markdown code span.\n  text = text.replace(/&/g, '&amp;');\n\n  // Do the angle bracket song and dance:\n  text = text.replace(/</g, '&lt;');\n  text = text.replace(/>/g, '&gt;');\n\n  // Now, escape characters that are magic in Markdown:\n  text = showdown.helper.escapeCharacters(text, '*_{}[]\\\\', false);\n\n  // jj the line above breaks this:\n  //---\n  //* Item\n  //   1. Subitem\n  //            special char: *\n  // ---\n\n  return text;\n});\n\n/**\n *  Input: an email address, e.g. \"foo@example.com\"\n *\n *  Output: the email address as a mailto link, with each character\n *    of the address encoded as either a decimal or hex entity, in\n *    the hopes of foiling most address harvesting spam bots. E.g.:\n *\n *    <a href=\"&#x6D;&#97;&#105;&#108;&#x74;&#111;:&#102;&#111;&#111;&#64;&#101;\n *       x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;\">&#102;&#111;&#111;\n *       &#64;&#101;x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;</a>\n *\n *  Based on a filter by Matthew Wickline, posted to the BBEdit-Talk\n *  mailing list: <http://tinyurl.com/yu7ue>\n *\n */\nshowdown.subParser('encodeEmailAddress', function (addr) {\n  'use strict';\n\n  var encode = [\n    function (ch) {\n      return '&#' + ch.charCodeAt(0) + ';';\n    },\n    function (ch) {\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\n    },\n    function (ch) {\n      return ch;\n    }\n  ];\n\n  addr = 'mailto:' + addr;\n\n  addr = addr.replace(/./g, function (ch) {\n    if (ch === '@') {\n      // this *must* be encoded. I insist.\n      ch = encode[Math.floor(Math.random() * 2)](ch);\n    } else if (ch !== ':') {\n      // leave ':' alone (to spot mailto: later)\n      var r = Math.random();\n      // roughly 10% raw, 45% hex, 45% dec\n      ch = (\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\n      );\n    }\n    return ch;\n  });\n\n  addr = '<a href=\"' + addr + '\">' + addr + '</a>';\n  addr = addr.replace(/\">.+:/g, '\">'); // strip the mailto: from the visible part\n\n  return addr;\n});\n\n/**\n * Within tags -- meaning between < and > -- encode [\\ ` * _] so they\n * don't conflict with their use in Markdown for code, italics and strong.\n */\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text) {\n  'use strict';\n\n  // Build a regex to find HTML tags and comments.  See Friedl's\n  // \"Mastering Regular Expressions\", 2nd Ed., pp. 200-201.\n  var regex = /(<[a-z\\/!$](\"[^\"]*\"|'[^']*'|[^'\">])*>|<!(--.*?--\\s*)+>)/gi;\n\n  text = text.replace(regex, function (wholeMatch) {\n    var tag = wholeMatch.replace(/(.)<\\/?code>(?=.)/g, '$1`');\n    tag = showdown.helper.escapeCharacters(tag, '\\\\`*_', false);\n    return tag;\n  });\n\n  return text;\n});\n\n/**\n * Handle github codeblocks prior to running HashHTML so that\n * HTML contained within the codeblock gets escaped properly\n * Example:\n * ```ruby\n *     def hello_world(x)\n *       puts \"Hello, #{x}\"\n *     end\n * ```\n */\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\n  'use strict';\n\n  // early exit if option is not enabled\n  if (!options.ghCodeBlocks) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\n\n  text += '~0';\n\n  text = text.replace(/(?:^|\\n)```(.*)\\n([\\s\\S]*?)\\n```/g, function (wholeMatch, language, codeblock) {\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\n\n    // First parse the github code block\n    codeblock = showdown.subParser('encodeCode')(codeblock);\n    codeblock = showdown.subParser('detab')(codeblock);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\n\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\n\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\n\n    // Since GHCodeblocks can be false positives, we need to\n    // store the primitive text and the parsed text in a global var,\n    // and then return a token\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/~0/, '');\n\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\n});\n\nshowdown.subParser('hashBlock', function (text, options, globals) {\n  'use strict';\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\n  return '\\n\\n~K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\n});\n\nshowdown.subParser('hashElement', function (text, options, globals) {\n  'use strict';\n\n  return function (wholeMatch, m1) {\n    var blockText = m1;\n\n    // Undo double lines\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\n    blockText = blockText.replace(/^\\n/, '');\n\n    // strip trailing blank lines\n    blockText = blockText.replace(/\\n+$/g, '');\n\n    // Replace the element text with a marker (\"~KxK\" where x is its key)\n    blockText = '\\n\\n~K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\n\n    return blockText;\n  };\n});\n\nshowdown.subParser('hashHTMLBlocks', function (text, options, globals) {\n  'use strict';\n\n  var blockTags = [\n      'pre',\n      'div',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'table',\n      'dl',\n      'ol',\n      'ul',\n      'script',\n      'noscript',\n      'form',\n      'fieldset',\n      'iframe',\n      'math',\n      'style',\n      'section',\n      'header',\n      'footer',\n      'nav',\n      'article',\n      'aside',\n      'address',\n      'audio',\n      'canvas',\n      'figure',\n      'hgroup',\n      'output',\n      'video',\n      'p'\n    ],\n    repFunc = function (wholeMatch, match, left, right) {\n      var txt = wholeMatch;\n      // check if this html element is marked as markdown\n      // if so, it's contents should be parsed as markdown\n      if (left.search(/\\bmarkdown\\b/) !== -1) {\n        txt = left + globals.converter.makeHtml(match) + right;\n      }\n      return '\\n\\n~K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n    };\n\n  for (var i = 0; i < blockTags.length; ++i) {\n    text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<' + blockTags[i] + '\\\\b[^>]*>', '</' + blockTags[i] + '>', 'gim');\n  }\n\n  // HR SPECIAL CASE\n  text = text.replace(/(\\n[ ]{0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  // Special case for standalone HTML comments:\n  text = text.replace(/(<!--[\\s\\S]*?-->)/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\n  text = text.replace(/(?:\\n\\n)([ ]{0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n  return text;\n});\n\n/**\n * Hash span elements that should not be parsed as markdown\n */\nshowdown.subParser('hashHTMLSpans', function (text, config, globals) {\n  'use strict';\n\n  var matches = showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');\n\n  for (var i = 0; i < matches.length; ++i) {\n    text = text.replace(matches[i][0], '~L' + (globals.gHtmlSpans.push(matches[i][0]) - 1) + 'L');\n  }\n  return text;\n});\n\n/**\n * Unhash HTML spans\n */\nshowdown.subParser('unhashHTMLSpans', function (text, config, globals) {\n  'use strict';\n\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\n    text = text.replace('~L' + i + 'L', globals.gHtmlSpans[i]);\n  }\n\n  return text;\n});\n\n/**\n * Hash span elements that should not be parsed as markdown\n */\nshowdown.subParser('hashPreCodeTags', function (text, config, globals) {\n  'use strict';\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    // encode html entities\n    var codeblock = left + showdown.subParser('encodeCode')(match) + right;\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  };\n\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^(?: |\\\\t){0,3}</code>\\\\s*</pre>', 'gim');\n  return text;\n});\n\nshowdown.subParser('headers', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('headers.before', text, options, globals);\n\n  var prefixHeader = options.prefixHeaderId,\n      headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\n\n  // Set text-style headers:\n  //\tHeader 1\n  //\t========\n  //\n  //\tHeader 2\n  //\t--------\n  //\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\n\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\n\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart + 1,\n      hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  // atx-style headers:\n  //  # Header 1\n  //  ## Header 2\n  //  ## Header 2 with closing hashes ##\n  //  ...\n  //  ###### Header 6\n  //\n  text = text.replace(/^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm, function (wholeMatch, m1, m2) {\n    var span = showdown.subParser('spanGamut')(m2, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\n        hLevel = headerLevelStart - 1 + m1.length,\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\n\n    return showdown.subParser('hashBlock')(header, options, globals);\n  });\n\n  function headerId(m) {\n    var title, escapedId = m.replace(/[^\\w]/g, '').toLowerCase();\n\n    if (globals.hashLinkCounts[escapedId]) {\n      title = escapedId + '-' + (globals.hashLinkCounts[escapedId]++);\n    } else {\n      title = escapedId;\n      globals.hashLinkCounts[escapedId] = 1;\n    }\n\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\n    if (prefixHeader === true) {\n      prefixHeader = 'section';\n    }\n\n    if (showdown.helper.isString(prefixHeader)) {\n      return prefixHeader + title;\n    }\n    return title;\n  }\n\n  text = globals.converter._dispatch('headers.after', text, options, globals);\n  return text;\n});\n\n/**\n * Turn Markdown image shortcuts into <img> tags.\n */\nshowdown.subParser('images', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('images.before', text, options, globals);\n\n  var inlineRegExp    = /!\\[(.*?)]\\s?\\([ \\t]*()<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(['\"])(.*?)\\6[ \\t]*)?\\)/g,\n      referenceRegExp = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[(.*?)]()()()()()/g;\n\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\n\n    var gUrls   = globals.gUrls,\n        gTitles = globals.gTitles,\n        gDims   = globals.gDimensions;\n\n    linkId = linkId.toLowerCase();\n\n    if (!title) {\n      title = '';\n    }\n\n    if (url === '' || url === null) {\n      if (linkId === '' || linkId === null) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\n        url = gUrls[linkId];\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\n          title = gTitles[linkId];\n        }\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\n          width = gDims[linkId].width;\n          height = gDims[linkId].height;\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    altText = altText.replace(/\"/g, '&quot;');\n    altText = showdown.helper.escapeCharacters(altText, '*_', false);\n    url = showdown.helper.escapeCharacters(url, '*_', false);\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\n\n    if (title) {\n      title = title.replace(/\"/g, '&quot;');\n      title = showdown.helper.escapeCharacters(title, '*_', false);\n      result += ' title=\"' + title + '\"';\n    }\n\n    if (width && height) {\n      width  = (width === '*') ? 'auto' : width;\n      height = (height === '*') ? 'auto' : height;\n\n      result += ' width=\"' + width + '\"';\n      result += ' height=\"' + height + '\"';\n    }\n\n    result += ' />';\n    return result;\n  }\n\n  // First, handle reference-style labeled images: ![alt text][id]\n  text = text.replace(referenceRegExp, writeImageTag);\n\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\n  text = text.replace(inlineRegExp, writeImageTag);\n\n  text = globals.converter._dispatch('images.after', text, options, globals);\n  return text;\n});\n\nshowdown.subParser('italicsAndBold', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\n\n  if (options.literalMidWordUnderscores) {\n    //underscores\n    // Since we are consuming a \\s character, we need to add it\n    text = text.replace(/(^|\\s|>|\\b)__(?=\\S)([\\s\\S]+?)__(?=\\b|<|\\s|$)/gm, '$1<strong>$2</strong>');\n    text = text.replace(/(^|\\s|>|\\b)_(?=\\S)([\\s\\S]+?)_(?=\\b|<|\\s|$)/gm, '$1<em>$2</em>');\n    //asterisks\n    text = text.replace(/(\\*\\*)(?=\\S)([^\\r]*?\\S[*]*)\\1/g, '<strong>$2</strong>');\n    text = text.replace(/(\\*)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\n\n  } else {\n    // <strong> must go first:\n    text = text.replace(/(\\*\\*|__)(?=\\S)([^\\r]*?\\S[*_]*)\\1/g, '<strong>$2</strong>');\n    text = text.replace(/(\\*|_)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\n  }\n\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\n  return text;\n});\n\n/**\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\n */\nshowdown.subParser('lists', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('lists.before', text, options, globals);\n  /**\n   * Process the contents of a single ordered or unordered list, splitting it\n   * into individual list items.\n   * @param {string} listStr\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function processListItems (listStr, trimTrailing) {\n    // The $g_list_level global keeps track of when we're inside a list.\n    // Each time we enter a list, we increment it; when we leave a list,\n    // we decrement. If it's zero, we're not in a list anymore.\n    //\n    // We do this because when we're not inside a list, we want to treat\n    // something like this:\n    //\n    //    I recommend upgrading to version\n    //    8. Oops, now this line is treated\n    //    as a sub-list.\n    //\n    // As a single paragraph, despite the fact that the second line starts\n    // with a digit-period-space sequence.\n    //\n    // Whereas when we're inside a list (or sub-list), that line will be\n    // treated as the start of a sub-list. What a kludge, huh? This is\n    // an aspect of Markdown's syntax that's hard to parse perfectly\n    // without resorting to mind-reading. Perhaps the solution is to\n    // change the syntax rules such that sub-lists must start with a\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\n    globals.gListLevel++;\n\n    // trim trailing blank lines:\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\n\n    // attacklab: add sentinel to emulate \\z\n    listStr += '~0';\n\n    var rgx = /(\\n)?(^[ \\t]*)([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(~0|\\2([*+-]|\\d+[.])[ \\t]+))/gm,\n        isParagraphed = (/\\n[ \\t]*\\n(?!~0)/.test(listStr));\n\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\n      checked = (checked && checked.trim() !== '');\n      var item = showdown.subParser('outdent')(m4, options, globals),\n          bulletStyle = '';\n\n      // Support for github tasklists\n      if (taskbtn && options.tasklists) {\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\n          if (checked) {\n            otp += ' checked';\n          }\n          otp += '>';\n          return otp;\n        });\n      }\n      // m1 - Leading line or\n      // Has a double return (multi paragraph) or\n      // Has sublist\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\n        item = showdown.subParser('blockGamut')(item, options, globals);\n      } else {\n        // Recursion for sub-lists:\n        item = showdown.subParser('lists')(item, options, globals);\n        item = item.replace(/\\n$/, ''); // chomp(item)\n        if (isParagraphed) {\n          item = showdown.subParser('paragraphs')(item, options, globals);\n        } else {\n          item = showdown.subParser('spanGamut')(item, options, globals);\n        }\n      }\n      item =  '\\n<li' + bulletStyle + '>' + item + '</li>\\n';\n      return item;\n    });\n\n    // attacklab: strip sentinel\n    listStr = listStr.replace(/~0/g, '');\n\n    globals.gListLevel--;\n\n    if (trimTrailing) {\n      listStr = listStr.replace(/\\s+$/, '');\n    }\n\n    return listStr;\n  }\n\n  /**\n   * Check and parse consecutive lists (better fix for issue #142)\n   * @param {string} list\n   * @param {string} listType\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function parseConsecutiveLists(list, listType, trimTrailing) {\n    // check if we caught 2 or more consecutive lists by mistake\n    // we use the counterRgx, meaning if listType is UL we look for UL and vice versa\n    var counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm,\n      subLists = [],\n      result = '';\n\n    if (list.search(counterRxg) !== -1) {\n      (function parseCL(txt) {\n        var pos = txt.search(counterRxg);\n        if (pos !== -1) {\n          // slice\n          result += '\\n\\n<' + listType + '>' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n\\n';\n\n          // invert counterType and listType\n          listType = (listType === 'ul') ? 'ol' : 'ul';\n          counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm;\n\n          //recurse\n          parseCL(txt.slice(pos));\n        } else {\n          result += '\\n\\n<' + listType + '>' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n\\n';\n        }\n      })(list);\n      for (var i = 0; i < subLists.length; ++i) {\n\n      }\n    } else {\n      result = '\\n\\n<' + listType + '>' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n\\n';\n    }\n\n    return result;\n  }\n\n  // attacklab: add sentinel to hack around khtml/safari bug:\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\n  text += '~0';\n\n  // Re-usable pattern to match any entire ul or ol list:\n  var wholeList = /^(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\n\n  if (globals.gListLevel) {\n    text = text.replace(wholeList, function (wholeMatch, list, m2) {\n      var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n      return parseConsecutiveLists(list, listType, true);\n    });\n  } else {\n    wholeList = /(\\n\\n|^\\n?)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\n    //wholeList = /(\\n\\n|^\\n?)( {0,3}([*+-]|\\d+\\.)[ \\t]+[\\s\\S]+?)(?=(~0)|(\\n\\n(?!\\t| {2,}| {0,3}([*+-]|\\d+\\.)[ \\t])))/g;\n    text = text.replace(wholeList, function (wholeMatch, m1, list, m3) {\n\n      var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n      return parseConsecutiveLists(list, listType);\n    });\n  }\n\n  // attacklab: strip sentinel\n  text = text.replace(/~0/, '');\n\n  text = globals.converter._dispatch('lists.after', text, options, globals);\n  return text;\n});\n\n/**\n * Remove one level of line-leading tabs or spaces\n */\nshowdown.subParser('outdent', function (text) {\n  'use strict';\n\n  // attacklab: hack around Konqueror 3.5.4 bug:\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '~0'); // attacklab: g_tab_width\n\n  // attacklab: clean up hack\n  text = text.replace(/~0/g, '');\n\n  return text;\n});\n\n/**\n *\n */\nshowdown.subParser('paragraphs', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n\n  var grafs = text.split(/\\n{2,}/g),\n      grafsOut = [],\n      end = grafs.length; // Wrap <p> tags\n\n  for (var i = 0; i < end; i++) {\n    var str = grafs[i];\n    // if this is an HTML marker, copy it\n    if (str.search(/~(K|G)(\\d+)\\1/g) >= 0) {\n      grafsOut.push(str);\n    } else {\n      str = showdown.subParser('spanGamut')(str, options, globals);\n      str = str.replace(/^([ \\t]*)/g, '<p>');\n      str += '</p>';\n      grafsOut.push(str);\n    }\n  }\n\n  /** Unhashify HTML blocks */\n  end = grafsOut.length;\n  for (i = 0; i < end; i++) {\n    var blockText = '',\n        grafsOutIt = grafsOut[i],\n        codeFlag = false;\n    // if this is a marker for an html block...\n    while (grafsOutIt.search(/~(K|G)(\\d+)\\1/) >= 0) {\n      var delim = RegExp.$1,\n          num   = RegExp.$2;\n\n      if (delim === 'K') {\n        blockText = globals.gHtmlBlocks[num];\n      } else {\n        // we need to check if ghBlock is a false positive\n        if (codeFlag) {\n          // use encoded version of all text\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text);\n        } else {\n          blockText = globals.ghCodeBlocks[num].codeblock;\n        }\n      }\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\n\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?~(K|G)\\d+\\2(\\n\\n)?/, blockText);\n      // Check if grafsOutIt is a pre->code\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\n        codeFlag = true;\n      }\n    }\n    grafsOut[i] = grafsOutIt;\n  }\n  text = grafsOut.join('\\n\\n');\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\n});\n\n/**\n * Run extension\n */\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\n  'use strict';\n\n  if (ext.filter) {\n    text = ext.filter(text, globals.converter, options);\n\n  } else if (ext.regex) {\n    // TODO remove this when old extension loading mechanism is deprecated\n    var re = ext.regex;\n    if (!re instanceof RegExp) {\n      re = new RegExp(re, 'g');\n    }\n    text = text.replace(re, ext.replace);\n  }\n\n  return text;\n});\n\n/**\n * These are all the transformations that occur *within* block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('spanGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\n  text = showdown.subParser('codeSpans')(text, options, globals);\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\n\n  // Process anchor and image tags. Images must come first,\n  // because ![foo][f] looks like an anchor.\n  text = showdown.subParser('images')(text, options, globals);\n  text = showdown.subParser('anchors')(text, options, globals);\n\n  // Make links out of things like `<http://example.com/>`\n  // Must come after _DoAnchors(), because you can use < and >\n  // delimiters in inline links like [this](<url>).\n  text = showdown.subParser('autoLinks')(text, options, globals);\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\n  text = showdown.subParser('strikethrough')(text, options, globals);\n\n  // Do hard breaks:\n  text = text.replace(/  +\\n/g, ' <br />\\n');\n\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\n  return text;\n});\n\nshowdown.subParser('strikethrough', function (text, options, globals) {\n  'use strict';\n\n  if (options.strikethrough) {\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\n    text = text.replace(/(?:~T){2}([\\s\\S]+?)(?:~T){2}/g, '<del>$1</del>');\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\n  }\n\n  return text;\n});\n\n/**\n * Strip any lines consisting only of spaces and tabs.\n * This makes subsequent regexs easier to write, because we can\n * match consecutive blank lines with /\\n+/ instead of something\n * contorted like /[ \\t]*\\n+/\n */\nshowdown.subParser('stripBlankLines', function (text) {\n  'use strict';\n  return text.replace(/^[ \\t]+$/mg, '');\n});\n\n/**\n * Strips link definitions from text, stores the URLs and titles in\n * hash references.\n * Link defs are in the form: ^[id]: url \"optional title\"\n *\n * ^[ ]{0,3}\\[(.+)\\]: // id = $1  attacklab: g_tab_width - 1\n * [ \\t]*\n * \\n?                  // maybe *one* newline\n * [ \\t]*\n * <?(\\S+?)>?          // url = $2\n * [ \\t]*\n * \\n?                // maybe one newline\n * [ \\t]*\n * (?:\n * (\\n*)              // any lines skipped = $3 attacklab: lookbehind removed\n * [\"(]\n * (.+?)              // title = $4\n * [\")]\n * [ \\t]*\n * )?                 // title is optional\n * (?:\\n+|$)\n * /gm,\n * function(){...});\n *\n */\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\n  'use strict';\n\n  var regex = /^ {0,3}\\[(.+)]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=~0))/gm;\n\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '~0';\n\n  text = text.replace(regex, function (wholeMatch, linkId, url, width, height, blankLines, title) {\n    linkId = linkId.toLowerCase();\n    globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url);  // Link IDs are case-insensitive\n\n    if (blankLines) {\n      // Oops, found blank lines, so it's not a title.\n      // Put back the parenthetical statement we stole.\n      return blankLines + title;\n\n    } else {\n      if (title) {\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\n      }\n      if (options.parseImgDimensions && width && height) {\n        globals.gDimensions[linkId] = {\n          width:  width,\n          height: height\n        };\n      }\n    }\n    // Completely remove the definition from the text\n    return '';\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/~0/, '');\n\n  return text;\n});\n\nshowdown.subParser('tables', function (text, options, globals) {\n  'use strict';\n\n  if (!options.tables) {\n    return text;\n  }\n\n  var tableRgx = /^[ \\t]{0,3}\\|?.+\\|.+\\n[ \\t]{0,3}\\|?[ \\t]*:?[ \\t]*(?:-|=){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:-|=){2,}[\\s\\S]+?(?:\\n\\n|~0)/gm;\n\n  function parseStyles(sLine) {\n    if (/^:[ \\t]*--*$/.test(sLine)) {\n      return ' style=\"text-align:left;\"';\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\n      return ' style=\"text-align:right;\"';\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\n      return ' style=\"text-align:center;\"';\n    } else {\n      return '';\n    }\n  }\n\n  function parseHeaders(header, style) {\n    var id = '';\n    header = header.trim();\n    if (options.tableHeaderId) {\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\n    }\n    header = showdown.subParser('spanGamut')(header, options, globals);\n\n    return '<th' + id + style + '>' + header + '</th>\\n';\n  }\n\n  function parseCells(cell, style) {\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\n    return '<td' + style + '>' + subText + '</td>\\n';\n  }\n\n  function buildTable(headers, cells) {\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\n        tblLgn = headers.length;\n\n    for (var i = 0; i < tblLgn; ++i) {\n      tb += headers[i];\n    }\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\n\n    for (i = 0; i < cells.length; ++i) {\n      tb += '<tr>\\n';\n      for (var ii = 0; ii < tblLgn; ++ii) {\n        tb += cells[i][ii];\n      }\n      tb += '</tr>\\n';\n    }\n    tb += '</tbody>\\n</table>\\n';\n    return tb;\n  }\n\n  text = globals.converter._dispatch('tables.before', text, options, globals);\n\n  text = text.replace(tableRgx, function (rawTable) {\n\n    var i, tableLines = rawTable.split('\\n');\n\n    // strip wrong first and last column if wrapped tables are used\n    for (i = 0; i < tableLines.length; ++i) {\n      if (/^[ \\t]{0,3}\\|/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/^[ \\t]{0,3}\\|/, '');\n      }\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\n      }\n    }\n\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\n        rawCells = [],\n        headers = [],\n        styles = [],\n        cells = [];\n\n    tableLines.shift();\n    tableLines.shift();\n\n    for (i = 0; i < tableLines.length; ++i) {\n      if (tableLines[i].trim() === '') {\n        continue;\n      }\n      rawCells.push(\n        tableLines[i]\n          .split('|')\n          .map(function (s) {\n            return s.trim();\n          })\n      );\n    }\n\n    if (rawHeaders.length < rawStyles.length) {\n      return rawTable;\n    }\n\n    for (i = 0; i < rawStyles.length; ++i) {\n      styles.push(parseStyles(rawStyles[i]));\n    }\n\n    for (i = 0; i < rawHeaders.length; ++i) {\n      if (showdown.helper.isUndefined(styles[i])) {\n        styles[i] = '';\n      }\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\n    }\n\n    for (i = 0; i < rawCells.length; ++i) {\n      var row = [];\n      for (var ii = 0; ii < headers.length; ++ii) {\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\n\n        }\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\n      }\n      cells.push(row);\n    }\n\n    return buildTable(headers, cells);\n  });\n\n  text = globals.converter._dispatch('tables.after', text, options, globals);\n\n  return text;\n});\n\n/**\n * Swap back in all the special characters we've hidden.\n */\nshowdown.subParser('unescapeSpecialChars', function (text) {\n  'use strict';\n\n  text = text.replace(/~E(\\d+)E/g, function (wholeMatch, m1) {\n    var charCodeToReplace = parseInt(m1);\n    return String.fromCharCode(charCodeToReplace);\n  });\n  return text;\n});\nmodule.exports = showdown;\n","/**\n * 获取屏幕的宽高\n */\n\nlet windowWidth = 0\nlet windowHeight = 0\nwx.getSystemInfo({\n  success(res) {\n    windowWidth = res.windowWidth\n    windowHeight = res.windowHeight\n  }\n})\n\nconst getSystemInfo = () => {\n  return [ windowWidth, windowHeight ]\n}\n\nconst getUniqueKey = (() => {\n  // 避免程序执行过快（快到1ms就再次调用），来个变量控制一下\n  let num = 0\n  return function() {\n    return new Date().getTime() + num++\n  }\n})();\n\nconst bindInstance = () => {\n  let instance = {}\n\n  return {\n    getInstance: () => {\n      return instance\n    },\n    /**\n     * 提供键名，绑定对象值\n     */\n    set: (bindName, data = null) => {\n      if (!instance[bindName]) {\n        instance[bindName] = data \n      }\n      return instance[bindName]\n    },\n    get: (bindName) => {\n      return instance[bindName] || null\n    },\n    /**\n     * 清除实例对象的所有缓存值\n     */\n    clear: () => {\n      instance = {}\n    },\n    /**\n     * 清楚实例对象特定的键\n     */\n    remove: (bindName) => {\n      instance[bindName] && delete instance[bindName]\n    },\n    /**\n     * 清楚当前节点及其子节点列表\n     * @param {*} key \n     */\n    removeAllByKey: (key) => {\n      if (!instance[key]) return\n      // 清除子节点关联\n      for (let childKey of instance[key]) {\n        instance[childKey] && delete instance[childKey]\n      }\n      // 清除父节点关联\n      delete instance[key]\n    }\n  }\n};\n\nmodule.exports = {\n  getSystemInfo,\n  getUniqueKey,\n  cacheInstance: bindInstance(),\n}\n"],"sourceRoot":""}